<div class="main-content">
    <div class="content-wrapper">
        <div class="page-header">
            <h2>Crear Nueva Pel√≠cula</h2>
            <p>Agrega una nueva pel√≠cula a tu cat√°logo cinematogr√°fico</p>
        </div>

        <div class="form-container">
            <form [formGroup]="peliculaForm" (ngSubmit)="onSubmit()" class="form-grid">

                <div class="image-upload-section">
                    <label class="image-upload">
                        <input type="file" accept="image/*" (change)="onImageSelected($event)" style="display: none;">
                        <ng-container *ngIf="imagenPreview; else uploadIcon">
                            <img [src]="imagenPreview" alt="Vista previa" class="img-preview" />
                        </ng-container>
                        <ng-template #uploadIcon>
                            <i class="fa-solid fa-plus"></i>
                            <div class="text">Agregar Imagen</div>
                        </ng-template>
                    </label>
                </div>

                <div class="form-fields">
                    <div class="form-field">
                        <label for="titulo">T√≠tulo</label>
                        <input type="text" id="titulo" formControlName="titulo"
                            placeholder="Ingrese el t√≠tulo de la pel√≠cula">
                        <div *ngIf="peliculaForm.get('titulo')?.invalid && peliculaForm.get('titulo')?.touched"
                            class="crear-pelicula-error">
                            El t√≠tulo es obligatorio.
                        </div>
                    </div>

                    <div class="field-row">
                        <div class="form-field">
                            <label for="duracion_minutos">Duraci√≥n (min)</label>
                            <input type="number" id="duracion_minutos" formControlName="duracion_minutos"
                                placeholder="120" min="1" required>
                            <div *ngIf="peliculaForm.get('duracion_minutos')?.invalid && peliculaForm.get('duracion_minutos')?.touched"
                                class="crear-pelicula-error">
                                La duraci√≥n es obligatoria y debe ser un n√∫mero positivo.
                            </div>

                        </div>
                        <div class="form-field">
                            <label for="clasificacion">Clasificaci√≥n</label>
                            <select id="clasificacion" formControlName="clasificacion" required>
                                <option value="" disabled selected>Seleccione una clasificaci√≥n</option>
                                <option *ngFor="let clasificacion of clasificaciones" [value]="clasificacion">
                                    {{ clasificacion }}
                                </option>
                            </select>
                            <div *ngIf="peliculaForm.get('clasificacion')?.invalid && peliculaForm.get('clasificacion')?.touched"
                                class="crear-pelicula-error">
                                La clasificaci√≥n es obligatoria.
                            </div>
                        </div>
                    </div>

                    <div class="form-field">
                        <label for="descripcion">Descripci√≥n</label>
                        <textarea id="descripcion" formControlName="descripcion"
                            placeholder="Ingrese una descripci√≥n detallada de la pel√≠cula..." required></textarea>
                        <div *ngIf="peliculaForm.get('descripcion')?.invalid && peliculaForm.get('descripcion')?.touched"
                            class="crear-pelicula-error">
                            La descripci√≥n es obligatoria.
                        </div>

                    </div>

                    <div class="field-row-three">
                        <div class="form-field">
                            <label for="fecha_estreno">Fecha de Estreno</label>
                            <input type="date" id="fecha_estreno" formControlName="fecha_estreno" required>
                            <div *ngIf="peliculaForm.get('fecha_estreno')?.invalid && peliculaForm.get('fecha_estreno')?.touched"
                                class="crear-pelicula-error">
                                La fecha de estreno es obligatoria.
                            </div>

                        </div>

                        <div class="form-field">
                            <label for="generos">Agregar G√©nero</label>
                            <select id="generos" name="generos" >
                                <option value="" disabled>Seleccione un genero</option>
                                <option *ngFor="let genero of generos" [value]="genero">
                                    {{ genero }}
                                </option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label for="estado">Estado</label>
                            <select id="estado" name="estado" required>
                                <option value="">Seleccione un estado</option>
                                <option value="Estreno">üî• En Estreno</option>
                                <option value="Cartelera">üé¨ En Cartelera</option>
                                <option value="Pr√≥ximamente">‚è≥ Pr√≥ximamente</option>
                                <option value="Finalizada">‚úÖ Finalizada</option>
                            </select>
                        </div>
                    </div>

                    <div class="multi-select">
                        <label>G√©neros Seleccionados</label>
                        <div class="tags-container" id="genresTags">
                            <div *ngIf="selectedGenres.length === 0" class="empty-state">No hay g√©neros seleccionados</div>
                            <div *ngFor="let genre of selectedGenres" class="tag">
                                {{ genre }}
                                <span class="tag-remove" (click)="removeGenre(genre)">√ó</span>
                            </div>
                        </div>
                    </div>

                    <div class="field-row">
                        <div class="form-field">
                            <label for="etiquetas">Agregar Etiqueta</label>
                            <select id="etiquetas" name="etiquetas" onchange="addTag(this.value)">
                                <option value="">Seleccione etiquetas</option>
                                <option value="Favorita">‚≠ê Favorita</option>
                                <option value="Cl√°sico">üèÜ Cl√°sico</option>
                                <option value="Cult">üé≠ Cult</option>
                                <option value="Blockbuster">üí• Blockbuster</option>
                                <option value="Indie">üé® Indie</option>
                                <option value="Oscar">üèÖ Oscar</option>
                                <option value="Taquillera">üí∞ Taquillera</option>
                                <option value="Imprescindible">üíé Imprescindible</option>
                                <option value="Nost√°lgica">üï∞Ô∏è Nost√°lgica</option>
                                <option value="Controversial">‚ö° Controversial</option>
                                <option value="Familia">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Familia</option>
                                <option value="Secuela">üîÑ Secuela</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label for="director">Director</label>
                            <input type="text" id="director" name="director" placeholder="Nombre del director">
                        </div>
                    </div>

                    <div class="multi-select">
                        <label>Etiquetas Seleccionadas</label>
                        <div class="tags-container" id="tagsTags">
                            <div class="empty-state">No hay etiquetas seleccionadas</div>
                        </div>
                    </div>
                </div>
            </form>

            <div class="submit-section">
                <button type="submit" class="submit-btn" onclick="createMovie()">
                    Crear Pel√≠cula
                </button>
            </div>
        </div>
    </div>
</div>