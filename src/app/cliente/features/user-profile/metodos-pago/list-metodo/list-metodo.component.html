<div class="payment-methods-container">
  <div class="payment-methods-header">
    <h2>MÉTODOS DE PAGO</h2>
  </div>

  <div class="payment-methods-card">
    <!-- Subtítulo informativo -->
    <div class="security-subtitle">
      <i class="fas fa-info-circle"></i>
      <span>Proyecto académico - Datos simulados</span>
    </div>

    <!-- Sección de tarjetas -->
    <div class="cards-section">
      <h3>Tarjetas de crédito y débito ({{ totalCards }})</h3>
      
      <!-- Estado de carga -->
      <div class="loading-state" *ngIf="isLoading">
        <i class="fas fa-spinner fa-spin"></i>
        <span>Cargando métodos de pago...</span>
      </div>

      <!-- Lista de tarjetas -->
      <div class="cards-list" *ngIf="!isLoading && cards.length > 0">
        <div class="payment-card" *ngFor="let card of cards">
          <div class="card-content">
            <div class="card-header">
              <i [class]="getCardIcon(card.tipo_tarjeta)" 
                 [style.color]="getCardColor(card.tipo_tarjeta)"
                 class="card-type-icon"></i>
              <span class="card-type">{{ card.tipo_tarjeta }}</span>
              <button class="card-delete-btn" (click)="deleteCard(card)" title="Eliminar tarjeta">
                <i class="fas fa-trash"></i>
              </button>
            </div>
            <div class="card-info">
              <span class="card-number">**** **** **** {{ card.numero_tarjeta.slice(-4) }}</span>
              <span class="card-expiry">{{ formatExpiryDate(card.fecha_expiracion) }}</span>
            </div>
            <div class="card-bank">
              <span>{{ card.banco }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Placeholder cuando no hay tarjetas -->
      <div class="payment-card" *ngIf="!isLoading && cards.length === 0">
        <div class="card-placeholder">
          <i class="fas fa-credit-card"></i>
          <span>No hay tarjetas registradas</span>
        </div>
      </div>

      <!-- Mensajes informativos -->
      <div class="security-messages">
        <div class="security-message">
          <i class="fas fa-info-circle"></i>
          <span>Proyecto académico</span>
        </div>
        <div class="security-message">
          <i class="fa-solid fa-code"></i>
          <span>Pago simulado</span>
        </div>
      </div>

      <!-- Botón agregar tarjeta -->
      <button class="add-card-btn" (click)="openModal()">
        <i class="fas fa-plus"></i>
        Agregar una tarjeta de crédito o débito
      </button>

      <!-- Iconos de métodos de pago -->
      <div class="payment-icons">
        <img src="/images/payments/Visa_Inc._logo.svg" alt="Visa" class="payment-icon">
        <img src="/images/payments/Mastercard-logo.svg" alt="Mastercard" class="payment-icon">
      </div>
    </div>

    <!-- Sección informativa -->
    <div class="info-section">
      <div class="info-subsection">
        <div class="info-header">
          <i class="fas fa-graduation-cap"></i>
          <h4>Proyecto Académico - CineByte</h4>
        </div>
        <ul class="info-list">
          <li><i class="fas fa-check"></i> Sistema de pagos simulado para demostración</li>
          <li><i class="fas fa-check"></i> No se procesan pagos reales</li>
          <li><i class="fas fa-check"></i> Datos seguros dentro del entorno de prueba</li>
          <li><i class="fas fa-check"></i> Funcionalidad completa sin transacciones monetarias</li>
          <li><i class="fas fa-check"></i> Desarrollado con fines educativos</li>
        </ul>
      </div>

      <div class="info-subsection">
        <div class="info-header">
          <i class="fas fa-code"></i>
          <h4>Simulación de pagos</h4>
        </div>
        <p>Este es un proyecto académico que simula un sistema de cine completo. Los métodos de pago y transacciones son ficticios, diseñados para demostrar la funcionalidad sin procesar pagos reales.</p>
        <div class="help-link">
          <span>¿Quieres saber más sobre el proyecto?</span>
          <a routerLink="/acerca-de-nosotros" class="contact-link">
            <i class="fas fa-info-circle"></i>
            Más información
          </a>
        </div>
      </div>

      <div class="info-subsection">
        <div class="info-header">
          <i class="fas fa-university"></i>
          <h4>Desarrollo académico</h4>
        </div>
        <p>Proyecto desarrollado por estudiantes de la UTMACH como parte de su formación profesional en desarrollo de software y sistemas web.</p>
        <div class="help-link">
          <span>¿Tienes dudas sobre el funcionamiento?</span>
          <a routerLink="/contactanos" class="contact-link">
            <i class="fas fa-comment"></i>
            Contáctanos
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para agregar tarjeta -->
<app-crear-metodo 
  [isModalOpen]="isModalOpen"
  (modalClosed)="closeModal()"
  (cardAdded)="onCardAdded($event)">
</app-crear-metodo>
